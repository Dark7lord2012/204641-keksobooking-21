/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
(() => {
/*!***********************!*\
  !*** ./js/network.js ***!
  \***********************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements:  */
eval("\n\nlet StatusCode = {\n  OK: 200\n};\nlet TIMEOUT_IN_MS = 10000;\nconst URL_UPLOAD = `https://21.javascript.pages.academy/keksobooking/data`;\nconst URL_SAVE = `https://21.javascript.pages.academy/keksobooking`;\n\nconst upload = (onSuccess, onError) => {\n  const xhr = new XMLHttpRequest();\n  xhr.responseType = `json`;\n\n  xhr.open(`GET`, URL_UPLOAD);\n  xhr.send();\n\n  xhr.addEventListener(`load`, () => {\n    if (xhr.status === StatusCode.OK) {\n      onSuccess(xhr.response);\n    } else {\n      onError(`Статус ответа: ${xhr.status} ${xhr.statusText}`);\n    }\n  });\n\n  xhr.addEventListener(`error`, () => {\n    onError(`Произошла ошибка соединения`);\n  });\n\n  xhr.addEventListener(`timeout`, () => {\n    onError(`Запрос не успел выполниться за ${xhr.timeout}мс`);\n  });\n\n  xhr.timeout = TIMEOUT_IN_MS;\n};\n\nconst save = (data, onSuccess) => {\n  const xhr = new XMLHttpRequest();\n  xhr.responseType = `json`;\n\n  xhr.open(`POST`, URL_SAVE);\n  xhr.send(data);\n\n  xhr.addEventListener(`load`, () => {\n    if (xhr.status === StatusCode.OK) {\n      return onSuccess(true);\n    } else {\n      return onSuccess(xhr);\n    }\n  });\n\n  xhr.timeout = TIMEOUT_IN_MS;\n};\n\nwindow.network = {\n  upload,\n  save\n};\n\n\n//# sourceURL=webpack://keksobooking/./js/network.js?");
})();

(() => {
/*!**********************!*\
  !*** ./js/filter.js ***!
  \**********************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements:  */
eval("\n\nconst housingPrice = document.querySelector(`#housing-price`);\nconst housingType = document.querySelector(`#housing-type`);\nconst housingRooms = document.querySelector(`#housing-rooms`);\nconst housingGuests = document.querySelector(`#housing-guests`);\n\nconst checkboxWifi = document.querySelector(`#filter-wifi`);\nconst checkboxDishwasher = document.querySelector(`#filter-dishwasher`);\nconst checkboxParking = document.querySelector(`#filter-parking`);\nconst checkboxWasher = document.querySelector(`#filter-washer`);\nconst checkboxElevator = document.querySelector(`#filter-elevator`);\nconst checkboxConditioner = document.querySelector(`#filter-conditioner`);\n\nconst allOptions = `any`;\nconst Price = {\n  LOW_MIDDLE: 10000,\n  MIDDLE_HIGH: 50000\n};\n\nconst filterType = (apartments) => {\n  let filtered = apartments;\n\n  if (housingType.value !== allOptions) {\n    filtered = filtered.filter((apartment) => {\n      return apartment.offer.type === housingType.value;\n    });\n  }\n\n  return filtered;\n};\n\nconst filterPrice = (apartments) => {\n  let filtered = apartments;\n\n  if (housingPrice.value !== allOptions) {\n    if (housingPrice.value === `low`) {\n      filtered = filtered.filter((apartment) => {\n        return apartment.offer.price < Price.LOW_MIDDLE;\n      });\n    } else if (housingPrice.value === `middle`) {\n      filtered = filtered.filter((apartment) => {\n        return apartment.offer.price >= Price.LOW_MIDDLE\n              && apartment.offer.price < Price.MIDDLE_HIGH;\n      });\n    } else if (housingPrice.value === `high`) {\n      filtered = filtered.filter((apartment) => {\n        return apartment.offer.price >= Price.MIDDLE_HIGH;\n      });\n    }\n  }\n\n  return filtered;\n};\n\nconst filterRooms = (apartments) => {\n  let filtered = apartments;\n\n  if (housingRooms.value !== allOptions) {\n    filtered = filtered.filter((apartment) => {\n      return apartment.offer.rooms === parseInt(housingRooms.value, 10);\n    });\n  }\n\n  return filtered;\n};\n\nconst filterGuests = (apartments) => {\n  let filtered = apartments;\n\n  if (housingGuests.value !== allOptions) {\n    filtered = filtered.filter((apartment) => {\n      return apartment.offer.guests === parseInt(housingGuests.value, 10);\n    });\n  }\n\n  return filtered;\n};\n\nconst filterWifi = (apartments) => {\n  let filtered = apartments;\n\n  if (checkboxWifi.checked) {\n    filtered = filtered.filter((apartment) => {\n      return apartment.offer.features.includes(`wifi`);\n    });\n  }\n\n  return filtered;\n};\n\nconst filterDishwasher = (apartments) => {\n  let filtered = apartments;\n\n  if (checkboxDishwasher.checked) {\n    filtered = filtered.filter((apartment) => {\n      return apartment.offer.features.includes(`dishwasher`);\n    });\n  }\n\n  return filtered;\n};\n\nconst filterParking = (apartments) => {\n  let filtered = apartments;\n\n  if (checkboxParking.checked) {\n    filtered = filtered.filter((apartment) => {\n      return apartment.offer.features.includes(`parking`);\n    });\n  }\n\n  return filtered;\n};\n\nconst filterWasher = (apartments) => {\n  let filtered = apartments;\n\n  if (checkboxWasher.checked) {\n    filtered = filtered.filter((apartment) => {\n      return apartment.offer.features.includes(`washer`);\n    });\n  }\n\n  return filtered;\n};\n\nconst filterElevator = (apartments) => {\n  let filtered = apartments;\n\n  if (checkboxElevator.checked) {\n    filtered = filtered.filter((apartment) => {\n      return apartment.offer.features.includes(`elevator`);\n    });\n  }\n\n  return filtered;\n};\n\nconst filterConditioner = (apartments) => {\n  let filtered = apartments;\n\n  if (checkboxConditioner.checked) {\n    filtered = filtered.filter((apartment) => {\n      return apartment.offer.features.includes(`conditioner`);\n    });\n  }\n\n  return filtered;\n};\n\nconst filterAllOptions = (apartments) => {\n  let filtered = filterType(apartments);\n  filtered = filterPrice(filtered);\n  filtered = filterRooms(filtered);\n  filtered = filterGuests(filtered);\n\n  filtered = filterWifi(filtered);\n  filtered = filterDishwasher(filtered);\n  filtered = filterParking(filtered);\n  filtered = filterWasher(filtered);\n  filtered = filterElevator(filtered);\n  filtered = filterConditioner(filtered);\n\n  return filtered;\n};\n\nwindow.filter = {\n  housingType,\n  filterType,\n  filterPrice,\n  filterRooms,\n  filterGuests,\n  filterWifi,\n  filterDishwasher,\n  filterAllOptions\n};\n\n\n\n//# sourceURL=webpack://keksobooking/./js/filter.js?");
})();

(() => {
/*!********************!*\
  !*** ./js/data.js ***!
  \********************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements:  */
eval("\n\n\nconst AVATARS = [\n  `img/avatars/user01.png`,\n  `img/avatars/user02.png`,\n  `img/avatars/user03.png`,\n  `img/avatars/user04.png`,\n  `img/avatars/user05.png`,\n  `img/avatars/user06.png`,\n  `img/avatars/user07.png`,\n  `img/avatars/user08.png`,\n];\n\nconst TYPE_APARTMENT = [\n  `palace`,\n  `flat`,\n  `house`,\n  `bungalow`\n];\n\nconst TYPE_APARTMENT_RUSSIAN = {\n  palace: `Дворец`,\n  flat: `Квартира`,\n  house: `Дом`,\n  bungalow: `Бунгало`\n};\n\nconst CHECHKIN = [\n  `12:00`,\n  `13:00`,\n  `14:00`\n];\n\nconst CHECHKOUT = [\n  `12:00`,\n  `13:00`,\n  `14:00`\n];\n\nconst FEATURES = [\n  `wifi`,\n  `dishwasher`,\n  `parking`,\n  `washer`,\n  `elevator`,\n  `conditioner`\n];\n\nconst PHOTOS = [\n  `http://o0.github.io/assets/images/tokyo/hotel2.jpg`,\n  `http://o0.github.io/assets/images/tokyo/hotel1.jpg`,\n  `http://o0.github.io/assets/images/tokyo/hotel3.jpg`\n];\n\n// Ограничения диапазона под картинку карты (для меток)\nconst MAP_RANGE_TOP = 130;\nconst MAP_RANGE_BOTTOM = 630;\n\nconst mapPins = document.querySelector(`.map__pins`);\nconst mapWidth = (document.querySelector(`.map__overlay`).offsetWidth - 20); // 20 - ширина полоски для прокрутки (предполагается)\n\nconst randomElementArray = (array) => {\n  return array[Math.round(Math.random() * (array.length - 1))];\n};\n\nconst getRandomNumber = (min, max) => {\n  return Math.round(Math.random() * (max - min) + min);\n};\n\nconst getRandomArray = (array, length = getRandomNumber(0, array.length - 1)) => {\n  const newArray = array;\n  for (let i = newArray.length - 1; i > 0; i--) {\n    let j = Math.floor(Math.random() * (i + 1)); // Алгоритм Фишера-Йетса\n    [array[i], array[j]] = [array[j], array[i]]; // Почитать в MDN про деструктурируещее присваивание (!)\n  }\n\n  return newArray.slice(0, length);\n};\n\nconst removeChildrenNode = (node, except = null) => {\n  while (node.firstChild) {\n    node.removeChild(node.firstChild);\n  }\n  if (except !== null) {\n    node.appendChild(except);\n  }\n};\n\nconst generateApartments = (length) => {\n  const apartments = [];\n\n  for (let i = 0; i < length; i++) {\n    apartments[i] = {\n      author: {\n        avatar: `${AVATARS[getRandomNumber(0, AVATARS.length - 1)]}`\n      },\n      offer: {\n        title: `Cтрока, заголовок предложения`,\n        address: `Площадь Сталина`,\n        price: 1300,\n        type: randomElementArray(TYPE_APARTMENT),\n        rooms: getRandomNumber(1, 3), // не бывает 0 комнат для 0 гостей\n        guests: getRandomNumber(1, 2),\n        checkin: randomElementArray(CHECHKIN),\n        checkout: randomElementArray(CHECHKOUT),\n        features: getRandomArray(FEATURES),\n        description: null,\n        photos: getRandomArray(PHOTOS)\n      },\n      location: {\n        x: getRandomNumber(0, mapWidth),\n        y: getRandomNumber(MAP_RANGE_TOP, MAP_RANGE_BOTTOM)\n      }\n    };\n  }\n  return apartments;\n};\n\nwindow.data = {\n  AVATARS,\n  TYPE_APARTMENT,\n  TYPE_APARTMENT_RUSSIAN,\n  CHECHKIN,\n  CHECHKOUT,\n  FEATURES,\n  PHOTOS,\n  MAP_RANGE_TOP,\n  MAP_RANGE_BOTTOM,\n  mapPins,\n  mapWidth,\n  randomElementArray,\n  getRandomNumber,\n  getRandomArray,\n  removeChildrenNode,\n  generateApartments\n};\n\n\n//# sourceURL=webpack://keksobooking/./js/data.js?");
})();

(() => {
/*!*******************!*\
  !*** ./js/map.js ***!
  \*******************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements:  */
eval("\n\n\nconst map = document.querySelector(`.map`);\nconst mapFilters = map.querySelectorAll(`.map__filter`);\nconst mapFeatures = map.querySelector(`.map__features`);\nconst mapPins = map.querySelector(`.map__pins`);\nconst mainPin = mapPins.querySelector(`.map__pin--main`);\nconst pins = mapPins.querySelectorAll(`.map__pin`);\nconst adForm = document.querySelector(`.ad-form`);\nconst adFormHeader = adForm.querySelector(`.ad-form-header`);\nconst adFormElements = adForm.querySelectorAll(`.ad-form__element`);\n\nconst defaultCoordsPin = {\n  x: mainPin.style.left,\n  y: mainPin.style.top\n};\n\nconst deactivateForms = () => {\n  map.classList.add(`map--faded`);\n  adForm.classList.add(`ad-form--disabled`);\n  // Фильтры меток\n  for (let filter of mapFilters) {\n    filter.disabled = true;\n  }\n  // Метки\n  mapFeatures.disabled = true;\n  for (let pin of pins) {\n    if (!pin.classList.contains(`map__pin--main`)) {\n      pin.disabled = true;\n    }\n  }\n  // Главной метке сброс координат\n  mainPin.style.left = defaultCoordsPin.x;\n  mainPin.style.top = defaultCoordsPin.y;\n  // Форма объявления\n  adFormHeader.disabled = true;\n  for (let element of adFormElements) {\n    element.disabled = true;\n  }\n};\n\ndeactivateForms();\n\nwindow.map = {\n  mapFilters,\n  mapFeatures,\n  pins,\n  mapPins,\n  adFormHeader,\n  adFormElements,\n  deactivateForms\n};\n\n\n//# sourceURL=webpack://keksobooking/./js/map.js?");
})();

(() => {
/*!********************!*\
  !*** ./js/card.js ***!
  \********************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements:  */
eval("\n\nconst templateCard = document.querySelector(`#card`).content.querySelector(`.popup`);\nconst TYPE_APARTMENT_RUSSIAN = window.data.TYPE_APARTMENT_RUSSIAN;\nconst removeChildrenNode = window.data.removeChildrenNode;\nconst mapFilterContainer = document.querySelector(`.map__filters-container`);\nconst map = document.querySelector(`.map`);\n\nconst renderCard = (card) => {\n  const cardElement = templateCard.cloneNode(true);\n\n  const popupTitle = cardElement.querySelector(`.popup__title`);\n  popupTitle.textContent = card.offer.title;\n\n  const popupAddress = cardElement.querySelector(`.popup__text--address`);\n  popupAddress.textContent = card.offer.address;\n\n  const popupPrice = cardElement.querySelector(`.popup__text--price`);\n  popupPrice.textContent = `${card.offer.price}₽/ночь`;\n\n  const popupType = cardElement.querySelector(`.popup__type`);\n  popupType.textContent = TYPE_APARTMENT_RUSSIAN[card.offer.type];\n\n  const popupCapacity = cardElement.querySelector(`.popup__text--capacity`);\n  popupCapacity.textContent = `${card.offer.rooms} комнаты для ${card.offer.guests} гостей`;\n\n  const popupTime = cardElement.querySelector(`.popup__text--time`);\n  popupTime.textContent = `Заезд после ${card.offer.checkin} выезд до ${card.offer.checkout}`; // мнемоника?\n\n  // Фичи\n  const popupFeatures = cardElement.querySelector(`.popup__features`);\n  const feature = cardElement.querySelector(`.popup__feature`);\n\n  removeChildrenNode(popupFeatures);\n\n  for (let i = 0; i < card.offer.features.length; i++) {\n    const featureElement = feature.cloneNode(true);\n    featureElement.className = `popup__feature popup__feature--${card.offer.features[i]}`;\n    popupFeatures.appendChild(featureElement);\n  }\n\n  const popupDescription = cardElement.querySelector(`.popup__description`);\n  popupDescription.textContent = card.offer.description;\n\n  // Фото\n  const popupPhotos = cardElement.querySelector(`.popup__photos`);\n  const popupPhoto = cardElement.querySelector(`.popup__photo`);\n\n  while (popupPhotos.firstChild) {\n    popupPhotos.removeChild(popupPhotos.firstChild);\n  }\n\n  for (let i = 0; i < card.offer.photos.length; i++) {\n    const photoElement = popupPhoto.cloneNode(true);\n    photoElement.src = `${card.offer.photos[i]}`;\n    popupPhotos.appendChild(photoElement);\n  }\n\n  const popupAvatar = cardElement.querySelector(`.popup__avatar`);\n  popupAvatar.src = card.author.avatar;\n\n  return cardElement;\n};\n\nconst onBtnCloseCardClick = () => {\n  closeCardPopup();\n};\n\nconst onCardPopupKeydown = (evt) => {\n  if (evt.key === `Escape`) {\n    closeCardPopup();\n  }\n};\n\nconst showCardPopup = (pin) => {\n  const card = renderCard(pin);\n  const oldCard = document.querySelector(`.popup`);\n  if (oldCard) {\n    closeCardPopup();\n  }\n  map.insertBefore(card, mapFilterContainer);\n  const btnCloseCard = card.querySelector(`.popup__close`);\n  btnCloseCard.addEventListener(`click`, onBtnCloseCardClick);\n  document.addEventListener(`keydown`, onCardPopupKeydown);\n};\n\nconst closeCardPopup = () => {\n  document.removeEventListener(`keydown`, onCardPopupKeydown);\n  const btnCloseCard = document.querySelector(`.popup__close`);\n  btnCloseCard.removeEventListener(`click`, onBtnCloseCardClick);\n  const oldCard = document.querySelector(`.popup`);\n  if (oldCard) {\n    map.removeChild(oldCard);\n  }\n};\n\nwindow.card = {\n  renderCard,\n  showCardPopup,\n  closeCardPopup,\n  onBtnCloseCardClick,\n  onCardPopupKeydown\n};\n\n\n//# sourceURL=webpack://keksobooking/./js/card.js?");
})();

(() => {
/*!************************!*\
  !*** ./js/debounce.js ***!
  \************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements:  */
eval("\n\nlet DEBOUNCE_INTERVAL = 500; // ms\n\nwindow.debounce = (cb) => {\n  let lastTimeout = null;\n\n  return (...parameters) => {\n    if (lastTimeout) {\n      window.clearTimeout(lastTimeout);\n    }\n    lastTimeout = window.setTimeout(function () {\n      cb(...parameters);\n    }, DEBOUNCE_INTERVAL);\n  };\n};\n\n\n\n//# sourceURL=webpack://keksobooking/./js/debounce.js?");
})();

(() => {
/*!*******************!*\
  !*** ./js/pin.js ***!
  \*******************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements:  */
eval("\n\nconst templatePin = document.querySelector(`#pin`).content.querySelector(`button`);\nconst mainPin = document.querySelector(`.map__pin--main`);\nconst addressMainPin = document.querySelector(`#address`);\n\nconst removeChildrenNode = window.data.removeChildrenNode;\nconst mapFilters = window.map.mapFilters;\nconst mapFeatures = window.map.mapFeatures;\nconst adFormHeader = window.map.adFormHeader;\nconst adFormElements = window.map.adFormElements;\nconst mapPins = window.data.mapPins;\nconst showCardPopup = window.card.showCardPopup;\nconst MAP_RANGE_TOP = window.data.MAP_RANGE_TOP;\nconst MAP_RANGE_BOTTOM = window.data.MAP_RANGE_BOTTOM;\nconst mapWidth = window.data.mapWidth;\n\nconst calculateAddress = (pin, inputAddress) => {\n  const x = parseInt(pin.style.left, 10);\n  const y = parseInt(pin.style.top, 10);\n  const widthPin = pin.offsetWidth;\n  const heightPin = pin.offsetHeight;\n  inputAddress.value = `${Math.round(x + (widthPin / 2))}, ${Math.round(y + (heightPin / 2))}`;\n};\n\ncalculateAddress(mainPin, addressMainPin);\n\nconst renderPin = (pin) => {\n  let pinElement = templatePin.cloneNode(true);\n  let pinImg = pinElement.querySelector(`img`);\n  pinImg.src = pin.author.avatar;\n  pinImg.alt = pin.offer.title;\n  pinElement.style.left = `${pin.location.x - (pinElement.offsetWidth / 2)}px`;\n  pinElement.style.top = `${pin.location.y - pinElement.offsetHeight}px`;\n\n  return pinElement;\n};\n\nconst activateForms = () => {\n  // Координата теперь не в середине, а в остром конце метки\n  mainPin.style.transform = `translateY(-100%)`;\n  // Убираем отключение активных элементов, написанные выше\n  document.querySelector(`.map`).classList.remove(`map--faded`);\n  mapFeatures.disabled = false;\n  for (let filter of mapFilters) {\n    filter.disabled = false;\n  }\n  const adForm = document.querySelector(`.ad-form`);\n  adForm.classList.remove(`ad-form--disabled`);\n  adFormHeader.disabled = false;\n  for (let element of adFormElements) {\n    element.disabled = false;\n  }\n  // Скачивание и отрисовка меток\n  const successHandler = (apartments) => {\n    let data = apartments;\n    // Отфильтрование квартир по типа и ограничение размера\n    let filtered = window.filter.filterAllOptions(data);\n    filtered = filtered.slice(0, 5);\n    apartments = filtered;\n\n    for (let i = 0; i < apartments.length; i++) {\n      const pin = apartments[i];\n      const pinElement = renderPin(pin);\n      fragment.appendChild(pinElement);\n\n      pinElement.addEventListener(`click`, () => {\n        showCardPopup(pin);\n      });\n    }\n\n    removeChildrenNode(mapPins, mainPin); // Очистка от старых меток\n    mapPins.appendChild(fragment);\n  };\n\n  const errorHandler = (errorMessage) => {\n    const node = document.createElement(`div`);\n\n    node.style = `z-index: 100; margin: 0 auto; text-align: center; background-color: rgba(240, 0, 0, 0.3);`;\n    node.style.position = `absolute`;\n    node.style.left = 0;\n    node.style.right = 0;\n    node.style.color = `white`;\n    node.style.fontSize = `20px`;\n\n    node.textContent = errorMessage;\n    document.body.insertAdjacentElement(`afterbegin`, node);\n  };\n\n  const fragment = document.createDocumentFragment();\n  window.network.upload(successHandler, errorHandler);\n};\n\n// Активация форм по нажатию\nconst onFormsActivateMousedown = (evt) => {\n  if (evt.button === 0) {\n    let startCoords = {\n      x: evt.clientX,\n      y: evt.clientY\n    };\n\n    const onMouseMove = (moveEvt) => {\n      let shift = {\n        x: startCoords.x - moveEvt.clientX,\n        y: startCoords.y - moveEvt.clientY\n      };\n\n      startCoords = {\n        x: moveEvt.clientX,\n        y: moveEvt.clientY\n      };\n\n      let diffY = mainPin.offsetTop - shift.y;\n      let diffX = mainPin.offsetLeft - shift.x;\n\n      if (diffY < MAP_RANGE_TOP) {\n        diffY = MAP_RANGE_TOP;\n      }\n\n      if (diffY > MAP_RANGE_BOTTOM) {\n        diffY = MAP_RANGE_BOTTOM;\n      }\n\n      if (diffX < 0) {\n        diffX = 0;\n      }\n      if (diffX > mapWidth) {\n        diffX = mapWidth;\n      }\n\n      mainPin.style.top = `${diffY}px`;\n      mainPin.style.left = `${diffX}px`;\n    };\n\n    const onMouseUp = () => {\n      activateForms();\n      document.removeEventListener(`mousemove`, onMouseMove);\n      document.removeEventListener(`mouseup`, onMouseUp);\n      // mainPin.removeEventListener(`mousedown`, onFormsActivateMousedown);\n      // mainPin.removeEventListener(`keydown`, onFormsActivateKeydown);\n      calculateAddress(mainPin, addressMainPin);\n    };\n    document.addEventListener(`mousemove`, onMouseMove);\n    document.addEventListener(`mouseup`, onMouseUp);\n  }\n};\n\nconst onFormsActivateKeydown = (evt) => {\n  if (evt.key === `Enter`) {\n    activateForms();\n    mainPin.removeEventListener(`mousedown`, onFormsActivateMousedown);\n    mainPin.removeEventListener(`keydown`, onFormsActivateKeydown);\n  }\n};\n\nmainPin.addEventListener(`mousedown`, onFormsActivateMousedown);\nmainPin.addEventListener(`keydown`, onFormsActivateKeydown);\n\nconst removePins = (pins, except) => {\n  window.data.removeChildrenNode(pins, except);\n};\n\nwindow.pin = {\n  templatePin,\n  mainPin,\n  renderPin,\n  activateForms,\n  onFormsActivateMousedown,\n  onFormsActivateKeydown,\n  removePins\n};\n\n\n//# sourceURL=webpack://keksobooking/./js/pin.js?");
})();

(() => {
/*!***************************!*\
  !*** ./js/filter-form.js ***!
  \***************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements:  */
eval("\n\n// Создал как бы подмодуль для filter, так как оттуда я не могу\n// вызвать функцию модуля pin, поэтому создал этот модуль\n// который ниже модуля pin и из этого модуля могу спокойно вызвать\n// activateForms()\n\nconst activateForms = window.pin.activateForms;\nconst closeCardPopup = window.card.closeCardPopup;\n\nconst housingType = document.querySelector(`#housing-type`);\nconst housingPrice = document.querySelector(`#housing-price`);\nconst housingRooms = document.querySelector(`#housing-rooms`);\nconst housingGuests = document.querySelector(`#housing-guests`);\n\nconst filterWifi = document.querySelector(`#filter-wifi`);\nconst filterDishwasher = document.querySelector(`#filter-dishwasher`);\nconst filterParking = document.querySelector(`#filter-parking`);\nconst filterWasher = document.querySelector(`#filter-washer`);\nconst filterElevator = document.querySelector(`#filter-elevator`);\nconst filterConditioner = document.querySelector(`#filter-conditioner`);\n\n// Придумать название, которое говорить что закрывает карточку при любом изменении фильтров\nconst onFilterChange = () => {\n  window.debounce(activateForms)();\n\n  const popup = document.querySelector(`.map__card`);\n  if (popup) {\n    closeCardPopup();\n  }\n};\n\nhousingType.addEventListener(`change`, onFilterChange);\nhousingPrice.addEventListener(`change`, onFilterChange);\nhousingRooms.addEventListener(`change`, onFilterChange);\nhousingGuests.addEventListener(`change`, onFilterChange);\n\nfilterWifi.addEventListener(`change`, onFilterChange);\nfilterDishwasher.addEventListener(`change`, onFilterChange);\nfilterParking.addEventListener(`change`, onFilterChange);\nfilterWasher.addEventListener(`change`, onFilterChange);\nfilterElevator.addEventListener(`change`, onFilterChange);\nfilterConditioner.addEventListener(`change`, onFilterChange);\n\n\n\n//# sourceURL=webpack://keksobooking/./js/filter-form.js?");
})();

(() => {
/*!********************!*\
  !*** ./js/form.js ***!
  \********************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements:  */
eval("\n\nconst typeApartment = document.querySelector(`#type`);\nconst priceApartment = document.querySelector(`#price`);\nconst timeInApartment = document.querySelector(`#timein`);\nconst timeOutApartment = document.querySelector(`#timeout`);\nconst roomsApartment = document.querySelector(`#room_number`);\nconst capacityApartment = document.querySelector(`#capacity`);\nconst options = capacityApartment.querySelectorAll(`option`);\nconst adForm = document.querySelector(`.ad-form`);\nconst mapPins = document.querySelector(`.map__pins`);\nconst mainPin = mapPins.querySelector(`.map__pin--main`);\n\nconst setTypeApartment = () => {\n  if (typeApartment.value === `bungalow`) {\n    priceApartment.min = `0`;\n    priceApartment.placeholder = `0`;\n  } else if (typeApartment.value === `flat`) {\n    priceApartment.min = `1000`;\n    priceApartment.placeholder = `1000`;\n  } else if (typeApartment.value === `house`) {\n    priceApartment.min = `5000`;\n    priceApartment.placeholder = `5000`;\n  } else if (typeApartment.value === `palace`) {\n    priceApartment.min = `10000`;\n    priceApartment.placeholder = `10000`;\n  }\n};\n\nconst onTypeApartmentChange = () => {\n  setTypeApartment();\n};\n\ntypeApartment.addEventListener(`change`, onTypeApartmentChange);\n\n// 2) Время заезда и уезда\n\nconst setTimeInApartment = () => {\n  if (timeInApartment.value === `12:00`) {\n    timeOutApartment.value = `12:00`;\n  } else if (timeInApartment.value === `13:00`) {\n    timeOutApartment.value = `13:00`;\n  } else if (timeInApartment.value === `14:00`) {\n    timeOutApartment.value = `14:00`;\n  }\n};\n\nconst setTimeOutApartment = () => {\n  if (timeOutApartment.value === `12:00`) {\n    timeInApartment.value = `12:00`;\n  } else if (timeOutApartment.value === `13:00`) {\n    timeInApartment.value = `13:00`;\n  } else if (timeOutApartment.value === `14:00`) {\n    timeInApartment.value = `14:00`;\n  }\n};\n\nconst onTimeInApartmentChange = () => {\n  setTimeInApartment();\n};\nconst onTimeOutApartmentChange = () => {\n  setTimeOutApartment();\n};\n\ntimeInApartment.addEventListener(`change`, onTimeInApartmentChange);\ntimeOutApartment.addEventListener(`change`, onTimeOutApartmentChange);\n\n// 3) Количество комнат\n\nconst setRoomsApartment = () => {\n  for (let option of options) {\n    option.disabled = false; // Сброс disabled при повторном вызове\n  }\n  let selectedOption;\n\n  if (roomsApartment.value === `1`) {\n    for (let option of options) {\n      if (option.value !== `1`) {\n        option.disabled = true;\n        option.selected = false;\n      } else {\n        selectedOption = option;\n      }\n    }\n    selectedOption.selected = true;\n  } else if (roomsApartment.value === `2`) {\n    for (let option of options) {\n      if (option.value !== `1`\n        && option.value !== `2`) {\n        option.disabled = true;\n      } else {\n        selectedOption = option;\n      }\n    }\n    selectedOption.selected = true;\n  } else if (roomsApartment.value === `3`) {\n    for (let option of options) {\n      if (option.value !== `1`\n        && option.value !== `2`\n        && option.value !== `3`) {\n        option.disabled = true;\n      } else {\n        selectedOption = option;\n      }\n    }\n    selectedOption.selected = true;\n  } else if (roomsApartment.value === `100`) {\n    for (let option of options) {\n      if (option.value !== `0`) {\n        option.disabled = true;\n      } else {\n        selectedOption = option;\n      }\n    }\n    selectedOption.selected = true;\n  }\n};\nconst onRoomsApartmentChange = () => {\n  setRoomsApartment();\n};\nroomsApartment.addEventListener(`change`, onRoomsApartmentChange);\n\n// При первом запуске один параметр может неверно совпадать с другим в форме\nconst setDefaultForms = () => {\n  setTypeApartment();\n  setTimeInApartment();\n  setTimeOutApartment();\n  setRoomsApartment();\n};\n\nsetDefaultForms();\n\n// Отправка формы на сервер\nadForm.addEventListener(`submit`, (evt) => {\n  window.network.save(new FormData(adForm), onSuccess);\n  evt.preventDefault();\n});\n\nconst onSuccess = (answer) => {\n  if (answer === true) {\n    const templateSuccess = document.querySelector(`#success`).content;\n    const mainPage = document.querySelector(`main`);\n    const elementSuccess = templateSuccess.cloneNode(true);\n    mainPage.appendChild(elementSuccess);\n    const successMessage = document.querySelector(`.success`);\n\n    const successMessageClick = () => {\n      successMessage.remove();\n      adForm.reset();\n      window.map.deactivateForms();\n      window.pin.removePins(mapPins, mainPin);\n      setDefaultForms();\n      successMessage.removeEventListener(`click`, successMessageClick);\n    };\n\n    const successMessagePressEsc = (evt) => {\n      if (evt.key === `Escape`) {\n        successMessage.remove();\n        document.removeEventListener(`keydown`, successMessagePressEsc);\n      }\n    };\n\n    successMessage.addEventListener(`click`, successMessageClick);\n    document.addEventListener(`keydown`, successMessagePressEsc);\n  } else {\n    const templateError = document.querySelector(`#error`).content;\n    const mainPage = document.querySelector(`main`);\n    const elementError = templateError.cloneNode(true);\n    mainPage.appendChild(elementError);\n    const errorMessage = document.querySelector(`.error`);\n    const btnErrorMessage = errorMessage.querySelector(`.error__button`);\n\n    const errorMessageClick = () => {\n      errorMessage.remove();\n      errorMessage.removeEventListener(`click`, errorMessageClick);\n    };\n\n    const errorMessagePressEsc = (evt) => {\n      if (evt === `Escape`) {\n        errorMessage.remove();\n        errorMessage.removeEventListener(`keydown`, errorMessagePressEsc);\n      }\n    };\n\n    errorMessage.addEventListener(`click`, errorMessageClick);\n    errorMessage.addEventListener(`keydown`, errorMessagePressEsc);\n    btnErrorMessage.addEventListener(`click`, errorMessageClick);\n  }\n};\n\nwindow.form = {\n  setTypeApartment,\n  onTypeApartmentChange,\n  setTimeInApartment,\n  setTimeOutApartment,\n  onTimeInApartmentChange,\n  onTimeOutApartmentChange,\n  setRoomsApartment,\n  onRoomsApartmentChange\n};\n\n\n//# sourceURL=webpack://keksobooking/./js/form.js?");
})();

(() => {
/*!*********************!*\
  !*** ./js/photo.js ***!
  \*********************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements:  */
eval("\n\nconst FILE_TYPES = [`gif`, `jpg`, `jpeg`, `png`];\n\nconst avatarChooser = document.querySelector(`#avatar`);\nconst avatarPreview = document.querySelector(`.ad-form-header__preview img`);\nconst imagesChooser = document.querySelector(`#images`);\nconst imagesPreview = document.querySelector(`.ad-form__photo`);\nconst photoContainer = document.querySelector(`.ad-form__photo-container`);\nconst adFormUpload = document.querySelector(`.ad-form__upload`);\n\n// const avatarPreviewDefault = avatarPreview.src;\n// console.log(avatarPreviewDefault);\n\navatarChooser.addEventListener(`change`, () => {\n  let avatar = avatarChooser.files[0];\n  let avatarName = avatar.name.toLowerCase();\n\n  let matches = FILE_TYPES.some((it) => avatarName.endsWith(it));\n\n  if (matches) {\n    let reader = new FileReader();\n\n    reader.addEventListener(`load`, () => {\n      avatarPreview.src = reader.result;\n    });\n\n    reader.readAsDataURL(avatar);\n  }\n});\n\nimagesChooser.addEventListener(`change`, () => {\n  let images = imagesChooser.files;\n  window.data.removeChildrenNode(photoContainer, adFormUpload);\n\n  for (let image of images) {\n    let imageName = image.name.toLowerCase();\n\n    let matches = FILE_TYPES.some((it) => imageName.endsWith(it));\n\n    if (matches) {\n      let reader = new FileReader();\n\n      reader.addEventListener(`load`, () => {\n        const element = document.createElement(`img`);\n        const block = imagesPreview.cloneNode(true);\n\n        element.src = reader.result;\n        element.style.maxWidth = `100%`;\n        element.style.height = `auto`;\n        element.style.maxHeight = `100%`;\n        element.style.display = `block`;\n        element.style.margin = `auto`;\n\n        block.style.display = `flex`;\n\n        block.appendChild(element);\n        photoContainer.appendChild(block);\n      });\n\n      reader.readAsDataURL(image);\n    }\n  }\n});\n\n\n//# sourceURL=webpack://keksobooking/./js/photo.js?");
})();

/******/ })()
;